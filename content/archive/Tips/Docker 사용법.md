Dockerë¥¼ ì‚¬ìš©í•˜ë©´ **ì–´ë–¤ ì‹œìŠ¤í…œì—ì„œë„ ë™ì¼í•œ í™˜ê²½ì„ ê·¸ëŒ€ë¡œ ì¬í˜„ì´ ê°€ëŠ¥**í•©ë‹ˆë‹¤.

- í•œë²ˆ ë§Œë“  í™˜ê²½ì„ ë‹¤ë¥¸ ì‚¬ëŒê³¼ ì‰½ê²Œ ê³µìœ í•˜ê³  ë™ì¼í•˜ê²Œ ì‹¤í–‰ì´ ê°€ëŠ¥í•˜ê¸°ì— â†’ **ì†ì‰¬ìš´ ë°°í¬ ë° ê³µìœ ê°€ ê°€ëŠ¥í•˜ê³ **
- ê° **ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì˜ ë²„ì „ ê´€ë¦¬ì—ë„ ìš©ì´**í•©ë‹ˆë‹¤.

âœ… **ê²°ê³¼ì ìœ¼ë¡œ, ê°œë°œ ë° ì‹¤í—˜ í™˜ê²½ì„ ëˆ„êµ¬ë‚˜ ë™ì¼í•˜ê²Œ ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡ ë³´ì¥í•˜ì—¬ ì¬í˜„ì„±ì„ ê·¹ëŒ€í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!**

# 1. SSH ì„œë²„ ì ‘ì† í•˜ê¸°

ssh ì„œë²„ ì£¼ì†Œ [ì„œë²„ url] ì— ê³„ì • ìƒì„±ì´ ì™„ë£Œë˜ì—ˆë‹¤ë©´,

vscode ìƒˆì°½ì„ í‚¨ ë‹¤ìŒ ìœ„ì˜ ê²€ìƒ‰ ì°½ì—ì„œ >Remote-SSH: Connect to Hostâ€¦ ë¡œ ë“¤ì–´ê°€ì¤ë‹ˆë‹¤.
![[Pasted image 20250427175056.png]]
ì•„ë˜ì˜ configure SSH Hostsâ€¦ ë¥¼ í´ë¦­í•©ë‹ˆë‹¤.
![[Pasted image 20250427175112.png]]
/Users/{ë³¸ì¸ì˜ ë§¥ë¶ id}/.ssh/config ë¡œ ëœ íŒŒì¼ì„ í´ë¦­í•©ë‹ˆë‹¤.
![[Pasted image 20250427175123.png]]
ì•„ë˜ì™€ ê°™ì´ ì…ë ¥í•´ì¤ë‹ˆë‹¤.

â­ï¸ Userì—ëŠ” [ì„œë²„ url] ê³„ì • ìƒì„± ì‹œì˜ ID ê°’ì„ ë„£ì–´ì•¼ í•©ë‹ˆë‹¤.
![[ìŠ¤í¬ë¦°ìƒ· 2025-04-27 ì˜¤í›„ 5.53.03.png]]
ì´í›„ ì €ì¥ì„ ëˆŒë €ë‹¤ë©´,

ê²€ìƒ‰ ì°½ì—ì„œ >Remote-SSH: Connect to Hostâ€¦ ë¡œ ë‹¤ì‹œ ë“¤ì–´ê°”ì„ ë•Œ,

`vibaLab` ì´ ì¶”ê°€ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
![[Pasted image 20250427175440.png]]
í´ë¦­í•˜ì—¬ SSH ì„œë²„ë¡œ ì ‘ì†í•˜ë©´ ì•„ë˜ì™€ ê°™ì€ í™”ë©´ì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

1. Open Folder
2. OK

ë¥¼ ì°¨ë¡€ëŒ€ë¡œ ëˆŒëŸ¬ì¤ë‹ˆë‹¤.
![[Pasted image 20250427175453.png]]
### â• ë¡œì»¬ RSA í‚¤ SSH ì„œë²„ ë“±ë¡ ë°©ë²•

> ì•”í˜¸ ì—†ì´ SSH ì„œë²„ ì ‘ì†í•˜ê¸°!

1. ë¡œì»¬ì— SSH í‚¤ê°€ ìˆëŠ”ì§€ í™•ì¸  
```java
	ls -l ~/.ssh/id_rsa.pub
```
2. ì—†ë‹¤ë©´, RSA í‚¤ë¥¼ ìƒˆë¡œ ìƒì„±
```java
    ssh-keygen -t rsa
```
- `-t rsa` : RSA íƒ€ì…ì˜ í‚¤ ìƒì„±
	ğŸ”¹Â ì´ì œÂ ~/.ssh/id_rsa.pub íŒŒì¼ì´ ìƒì„±ë¨!
3. SSH ì„œë²„ì— ê³µê°œ í‚¤ ì¶”ê°€
```c
    ssh-copy-id user@remote-server
```
- user â†’ SSH ì„œë²„ì˜ ì‚¬ìš©ì ì´ë¦„
- remote-server â†’ SSH ì„œë²„ì˜ IP ì£¼ì†Œ ë˜ëŠ” ë„ë©”ì¸ 

# 2. docker image build

### Docker Extension ì„¤ì¹˜

![[Pasted image 20250427175737.png | 300]]
vscode ì°½ ì¢Œì¸¡ì˜ Extension tabì— ë“¤ì–´ê°€ì„œ

containerë¥¼ ê²€ìƒ‰í•˜ì—¬ ë‚˜ì˜¤ëŠ”

1. Docker
2. Dev Containers

extensionì„ ë‘˜ ë‹¤ ì„¤ì¹˜í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤!

### Dockerfile ìƒì„± ë° ì •ì˜

ë‹¤ì‹œ íŒŒì¼ íƒìƒ‰ê¸°ë¡œ ëŒì•„ì™€ì„œ

2ê°œë¥¼ ìƒˆë¡œ ë§Œë“¤ì–´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.

1. **Dockerfile**: Docker image build ë¥¼ ì–´ë–»ê²Œ í• ì§€ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.
2. **workspace í´ë”**: Docker Containerì˜ íŒŒì¼ë“¤ì„ Mountì‹œì¼œì¤„ í´ë”ë¥¼ ìƒˆë¡œ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤.

![[Pasted image 20250427175824.png]]

ì™„ë£Œë˜ì—ˆë‹¤ë©´ **Dockerfile** ì„ ì—´ì–´ ì•„ë˜ ì½”ë“œë¥¼ ì‘ì„±í•´ì¤ë‹ˆë‹¤.

```bash
# 1. ì–´ë–¤ docker imageë¥¼ ì‚¬ìš©í•˜ì—¬ buildë¥¼ í• ì§€ -> ì—¬ê¸°ì„œëŠ” ë‹¤ìš´ ë°›ì•„ë‘” NVIDIA PyTorch ê³µì‹ ì´ë¯¸ì§€ë¥¼ í™œìš©í•œë‹¤. 
\\FROM nvcr.io/nvidia/pytorch:25.02-py3

# 2. ê¸°ë³¸ íŒ¨í‚¤ì§€ ì„¤ì¹˜
RUN apt-get update && apt-get install -y vim git wget graphviz

# 3. ê¸°ë³¸ì ìœ¼ë¡œ ë‚˜ëŠ” GNNì„ ì‚¬ìš©í•  ê²ƒì´ê¸°ì— GNNê´€ë ¨ ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì— ëŒ€í•´ ì •ì˜í•´ì£¼ì—ˆë‹¤. 
# ì¶”ê°€ì ìœ¼ë¡œ í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ìˆë‹¤ë©´ ëª…ì‹œí•´ì£¼ë©´ëœë‹¤. 

# PyTorch Geometric(PYGRAPHS) ê´€ë ¨ í•„ìˆ˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜
RUN pip install --no-cache-dir torch torchvision torchaudio \\
    numpy pandas matplotlib scikit-learn tqdm networkx \\
    torchmetrics rdkit

# PyTorch Geometric (PyG) ì„¤ì¹˜
RUN pip install --no-cache-dir torch-scatter torch-sparse torch-cluster torch-spline-conv \\
    torch-geometric -f <https://data.pyg.org/whl/torch-2.1.0+cu121.html>

# Deep Graph Library (DGL) ì„¤ì¹˜
RUN pip install --no-cache-dir dgl -f <https://data.dgl.ai/wheels/cu121.html>

# 4. optional í•˜ê¸´ í•˜ì§€ë§Œ, chrome ì°½ì—ì„œ jupyter notebookì„ ì‹¤í–‰í•˜ê³  ì‹¶ì„ ë•Œë¥¼ ìœ„í•´ ì¶”ê°€í•´ë‘ì—ˆë‹¤. 
\\CMD ["jupyter", "notebook", "--ip=0.0.0.0", "--allow-root", "--NotebookApp.token=''"]
```

### Dockerfile Build

**Dockerfile**ì„ ì €ì¥í•œ ë’¤ì—, í˜„ì¬ `Dockerfile`ì´ ìˆëŠ” ë””ë ‰í† ë¦¬ì—ì„œ í„°ë¯¸ë„ì„ ì—´ê³  ì•„ë˜ì˜ shell ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•´ì¤ë‹ˆë‹¤.

```bash
docker build -t my-env .
```

âœ…Â `-t my-env` â†’ ë¹Œë“œëœ ì´ë¯¸ì§€ë¥¼ `my-env`ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ì €ì¥
âœ…Â `.` â†’ í˜„ì¬ ë””ë ‰í† ë¦¬ì— ìˆëŠ” `Dockerfile`ì„ ì‚¬ìš©í•˜ì—¬ ë¹Œë“œ

### Build í™•ì¸

`my-env`ë¼ëŠ” ì´ë¦„ì˜ ì´ë¯¸ì§€ê°€ ì˜ ìƒì„±ë˜ì—ˆëŠ”ì§€ í™•ì¸í•´ì¤ë‹ˆë‹¤.

```bash
docker images
```

# 3. docker container attach

### Dockerfile Run

> ë¹Œë“œëœ Docker ì´ë¯¸ì§€ ìœ„ì— **Container í™˜ê²½ì„ ìƒì„±**í•˜ì—¬ ì‹¤í–‰í•©ë‹ˆë‹¤.

ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì—ì„œ ë‘ ê°œì˜ í´ë”ë¥¼ ìƒì„±í•˜ê³ , ê°ê° í•„ìš”í•œ ìœ„ì¹˜ì— **ë§ˆìš´íŠ¸(Mount)** í•  ì˜ˆì •ì…ë‹ˆë‹¤.

1ï¸âƒ£ **í˜„ì¬ Docker í™˜ê²½(Local) í´ë”**
- ê¸°ë³¸ì ìœ¼ë¡œ ëª¨ë“  ì‘ì—…ì´ ì§„í–‰ë˜ëŠ” ì£¼ìš” ì‘ì—… ë””ë ‰í† ë¦¬ì…ë‹ˆë‹¤.

2ï¸âƒ£ **NAS(Network Attached Storage) í´ë”**
- ëŒ€ìš©ëŸ‰ ë°ì´í„°ë¥¼ ì €ì¥í•˜ê±°ë‚˜ í™œìš©í•  ë•Œ ìœ ìš©í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### NASì— Mountë¥¼ ìœ„í•œ í´ë” ìƒì„±
> í„°ë¯¸ë„ì—ì„œ ì§ì ‘ NAS í´ë”ë¡œ ì ‘ì†í•˜ì—¬ ìƒì„±í•´ë„ ë¬´ê´€í•©ë‹ˆë‹¤!

![[ìŠ¤í¬ë¦°ìƒ· 2025-04-27 ì˜¤í›„ 6.00.09.png]]
1. [NAS IP] ë¡œ NAS ì ‘ì†
2. /viba_shared/home ì•ˆì— ë³¸ì¸ì´ ì›í•˜ëŠ” ì´ë¦„ì˜ í´ë” ìƒì„±
    â†’ ì—¬ê¸°ì„œëŠ” â€˜honggildongâ€™ ì´ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ë§Œë“¤ì—ˆë‹¤ ê°€ì •í•˜ê³ , ì„¤ëª…ì„ ì§„í–‰í•˜ê² ìŠµë‹ˆë‹¤.

ë‹¤ì‹œ í„°ë¯¸ë„ë¡œ ëŒì•„ì™€ì„œ, ì•„ë˜ì™€ ê°™ì€ shell ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•´ì¤ë‹ˆë‹¤.

```bash
docker run --gpus all -d -it --name my-container \\
    -v $(pwd)/workspace:/workspace/Local \\
    -v /nas/home/honggildong:/workspace/NAS \\
    my-env
```

|ì˜µì…˜|ì„¤ëª…|
|---|---|
|`docker run`|ìƒˆë¡œìš´ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•˜ëŠ” ëª…ë ¹ì–´|
|`--gpus all`|ì»¨í…Œì´ë„ˆì—ì„œ **ëª¨ë“  GPUë¥¼ ì‚¬ìš© ê°€ëŠ¥**í•˜ë„ë¡ ì„¤ì •|
|`-d`|ì»¨í…Œì´ë„ˆë¥¼ **ë°±ê·¸ë¼ìš´ë“œ(detached mode)ì—ì„œ ì‹¤í–‰** (í„°ë¯¸ë„ ì¢…ë£Œí•´ë„ ê³„ì† ì‹¤í–‰ë¨)|
|`-it`|**ì¸í„°ë™í‹°ë¸Œ(Interactive) ëª¨ë“œ + í„°ë¯¸ë„(TTY) ëª¨ë“œ**ë¡œ ì‹¤í–‰ (ì¦‰, ëª…ë ¹ì–´ ì…ë ¥ ê°€ëŠ¥)|
|`--name my-container`|ì»¨í…Œì´ë„ˆ ì´ë¦„ì„ `my-container`ë¡œ ì„¤ì •|
|`-v $(pwd)/workspace:/workspace/Local`|**í˜„ì¬ ë¡œì»¬ ë””ë ‰í† ë¦¬** ë‚´ `workspace` í´ë”ë¥¼|
|ì»¨í…Œì´ë„ˆ ë‚´ `/workspace/Local`ë¡œ ë§ˆìš´íŠ¸ (ë°ì´í„° ê³µìœ )||
|`-v /nas/home/honggildong:/workspace/NAS`|**NAS(Network Attached Storage) ê²½ë¡œ** `/nas/home/shbae`ë¥¼|
|ì»¨í…Œì´ë„ˆ ë‚´ `/workspace/NAS`ë¡œ ë§ˆìš´íŠ¸ (ë°ì´í„° ê³µìœ )||
|`my-env`|ì‹¤í–‰í•  **Docker ì´ë¯¸ì§€ ì´ë¦„**|
|(ì´ì „ì— ë¹Œë“œí•œ `my-env` ì´ë¯¸ì§€ ê¸°ë°˜ìœ¼ë¡œ ì»¨í…Œì´ë„ˆ ìƒì„±)||
![[ìŠ¤í¬ë¦°ìƒ· 2025-04-27 ì˜¤í›„ 6.01.08.png]]
â¬†ï¸Â ì´ëŸ°ì‹ìœ¼ë¡œ ë–´ë‹¤ë©´ ì„±ê³µì…ë‹ˆë‹¤!

### â• ìƒì„±ëœ container ì‚­ì œ

ë§Œì•½, ì¶”ê°€ì ì¸ ì˜µì…˜ì„ ë„£ê³  ì‹¶ê±°ë‚˜, ì˜¤íƒ€ë¥¼ ë‚´ì„œ ë‹¤ì‹œ `docker run`ì„ í•´ì•¼í•˜ëŠ” ìƒí™©ì´ë¼ë©´,

ì•„ë˜ì™€ ê°™ì€ ëª…ë ¹ì–´ë¥¼ ì°¨ë¡€ë¡œ ì…ë ¥í•´ì¤ë‹ˆë‹¤.

```bash
#1. ì‹¤í–‰ ì¤‘ì¸ container ì¤‘ì§€
docker stop my-container

#2. í•´ë‹¹ container ì‚­ì œ
docker rm my-container
```

### ìƒì„±ëœ ì»¨í…Œì´ë„ˆ í™•ì¸ ë° ì ‘ì†

ì‹¤í–‰ ì¤‘ì¸ ì»¨í…Œì´ë„ˆ ëª©ë¡ì„ í™•ì¸í•´ì¤ë‹ˆë‹¤.

```bash
docker ps
```

![[Pasted image 20250427180223.png]]
ìœ„ì™€ ê°™ì´ ìš°ë¦¬ê°€ ì •ì˜í•œ docker image ì´ë¦„ìœ¼ë¡œ, ì •ì˜í•œ ì´ë¦„ì˜ docker container ê°€ ìˆë‹¤ë©´ ì„±ê³µì…ë‹ˆë‹¤!

ì´ì œ ë§ˆì§€ë§‰ìœ¼ë¡œ vscode ê²€ìƒ‰ì°½ì—

**>Dev Containers: Attach to Running Containerâ€¦**

ë¥¼ í´ë¦­í•˜ë©´ ìƒì„±í•œ Containerë¡œ ì ‘ì†í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!

![[Pasted image 20250427180240.png]]

### ì™„ë£Œ!
![[Pasted image 20250427180251.png]]
ì ‘ì†í•œ Docker Containerì—ì„œ

1. ê¸°ë³¸ì ìœ¼ë¡œ **Local í´ë”**ì—ì„œ ì‘ì—…ì„ í•˜ë©´ ë˜ê³ 
2. **NAS í´ë”**ëŠ” í•„ìš”í•œ ìƒí™©(**ìš©ëŸ‰ì´ í° íŒŒì¼ ì—…ë¡œë“œ, ë‹¤ë¥¸ ì‚¬ëŒë“¤ê³¼ ê³µìœ í•˜ê³ í”ˆ íŒŒì¼**) ì— ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤~~

### +@ ë™ì‘í•˜ê³  ìˆëŠ” ì»¨í…Œì´ë„ˆ ë¦¬ì†ŒìŠ¤ í™•ì¸

```bash
docker stats
```

![[Pasted image 20250427180301.png]]